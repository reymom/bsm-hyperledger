{{define "auctions"}}
{{template "beforeContent"}}

<div class="card">
    <div class="card-header">
        <div class="title">{{if eq orgType "supplier"}}My{{end}} Auctions</div>
    </div>
    <div class="card-body">
        <div class="table-responsive-lg">
            <table class="mb-0 table table-hover ">
                <thead>
                    <tr class="table-active">
                        <th>Auction ID</th>
                        {{if eq orgType "buyer"}}
                        <th>Seller</th>
                        {{end}}
                        <th>Private</th>
                        <th>Material</th>
                        <th>Form</th>
                        <th>Weight</th>
                        <th colspan="2">Min Price</th>
                        <th>Nº Bids</th>
                        <th>Status</th>
                        <th></th>
                    </tr>
                </thead>
                {{range .Auctions}}
                <tr>
                    <th>{{.ID}}</th>
                    {{if eq orgType "buyer"}}
                    <th>{{.Seller}}</th>
                    {{end}}
                    <th>{{if .IsPrivate}}collection{{.CollectionName}}{{else}}<i class="fa fa-times" aria-hidden="true"></i>{{end}}</th>
                    <th>{{.Type}}</th>
                    <th>{{.Form}}</th>
                    <th>{{.Weight}} kg</th>
                    <th colspan="2">{{.MinPrice}} €</th>
                    <th>{{len .PrivateBids}}</th>
                    <th>{{.Status.ToString}}</th>
                    {{if eq orgType "buyer"}}
                    <th>
                        {{if eq .Status 1}}
                            {{if eq orgType "buyer"}}
                            <a href="/auction/bid?auctionID={{.ID}}">
                                <button class="mb-2 mr-2 btn-primary">Place a Bid</button>
                            </a>
                            {{else if eq orgType "supplier"}}
                            <a href="/auction/close?auctionID={{.ID}}">
                                <button class="mb-2 mr-2 btn-primary">Close</button>
                            </a>
                            {{end}}
                        {{else if eq .Status 2}}
                            {{if eq orgType "buyer"}}
                            <a href="/auction/bid/reveal?auctionID={{.ID}}">
                                <button class="mb-2 mr-2 btn-primary">Reveal Bid</button>
                            </a>
                            {{else if eq orgType "supplier"}}
                            <a href="/auction/end?auctionID={{.ID}}">
                                <button class="mb-2 mr-2 btn-primary">End</button>
                            </a>
                            {{end}}
                        {{end}}
                    </th>
                    {{end}}
                </tr>
                {{end}}
            </table>
        </div>    
    </div>
    {{if eq orgType "supplier"}}
        <div class="card-footer text-center text-success">
            <button type="button" class="btn btn-primary"><a href="/auctions/create">Create New Auction</a></button>
        </div>
    {{end}}
</div>

{{template "afterContent"}}
{{end}}